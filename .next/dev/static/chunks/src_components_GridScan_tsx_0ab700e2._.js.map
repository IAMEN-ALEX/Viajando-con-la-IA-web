{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Asus/OneDrive/Desktop/viajando-con-ia-web/src/components/GridScan.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { EffectComposer, RenderPass, EffectPass, BloomEffect, ChromaticAberrationEffect } from 'postprocessing';\r\nimport * as THREE from 'three';\r\nimport * as faceapi from 'face-api.js';\r\n\r\ntype GridScanProps = {\r\n    enableWebcam?: boolean;\r\n    showPreview?: boolean;\r\n    modelsPath?: string;\r\n    sensitivity?: number;\r\n\r\n    lineThickness?: number;\r\n    linesColor?: string;\r\n\r\n    gridScale?: number;\r\n    lineStyle?: 'solid' | 'dashed' | 'dotted';\r\n    lineJitter?: number;\r\n\r\n    enablePost?: boolean;\r\n    bloomIntensity?: number;\r\n    bloomThreshold?: number;\r\n    bloomSmoothing?: number;\r\n    chromaticAberration?: number;\r\n    noiseIntensity?: number;\r\n\r\n    scanColor?: string;\r\n    scanOpacity?: number;\r\n    scanDirection?: 'forward' | 'backward' | 'pingpong';\r\n    scanSoftness?: number;\r\n    scanGlow?: number;\r\n    scanPhaseTaper?: number;\r\n    scanDuration?: number;\r\n    scanDelay?: number;\r\n    enableGyro?: boolean;\r\n    scanOnClick?: boolean;\r\n    snapBackDelay?: number;\r\n    className?: string;\r\n    style?: React.CSSProperties;\r\n};\r\n\r\nconst vert = `\r\nvarying vec2 vUv;\r\nvoid main(){\r\n  vUv = uv;\r\n  gl_Position = vec4(position.xy, 0.0, 1.0);\r\n}\r\n`;\r\n\r\nconst frag = `\r\nprecision highp float;\r\nuniform vec3 iResolution;\r\nuniform float iTime;\r\nuniform vec2 uSkew;\r\nuniform float uTilt;\r\nuniform float uYaw;\r\nuniform float uLineThickness;\r\nuniform vec3 uLinesColor;\r\nuniform vec3 uScanColor;\r\nuniform float uGridScale;\r\nuniform float uLineStyle;\r\nuniform float uLineJitter;\r\nuniform float uScanOpacity;\r\nuniform float uScanDirection;\r\nuniform float uNoise;\r\nuniform float uBloomOpacity;\r\nuniform float uScanGlow;\r\nuniform float uScanSoftness;\r\nuniform float uPhaseTaper;\r\nuniform float uScanDuration;\r\nuniform float uScanDelay;\r\nvarying vec2 vUv;\r\n\r\nuniform float uScanStarts[8];\r\nuniform float uScanCount;\r\n\r\nconst int MAX_SCANS = 8;\r\n\r\nfloat smoother01(float a, float b, float x){\r\n  float t = clamp((x - a) / max(1e-5, (b - a)), 0.0, 1.0);\r\n  return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\r\n}\r\n\r\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\r\n{\r\n    vec2 p = (2.0 * fragCoord - iResolution.xy) / iResolution.y;\r\n\r\n    vec3 ro = vec3(0.0);\r\n    vec3 rd = normalize(vec3(p, 2.0));\r\n\r\n    float cR = cos(uTilt), sR = sin(uTilt);\r\n    rd.xy = mat2(cR, -sR, sR, cR) * rd.xy;\r\n\r\n    float cY = cos(uYaw), sY = sin(uYaw);\r\n    rd.xz = mat2(cY, -sY, sY, cY) * rd.xz;\r\n\r\n    vec2 skew = clamp(uSkew, vec2(-0.7), vec2(0.7));\r\n    rd.xy += skew * rd.z;\r\n\r\n    vec3 color = vec3(0.0);\r\n  float minT = 1e20;\r\n  float gridScale = max(1e-5, uGridScale);\r\n    float fadeStrength = 2.0;\r\n    vec2 gridUV = vec2(0.0);\r\n\r\n  float hitIsY = 1.0;\r\n    for (int i = 0; i < 4; i++)\r\n    {\r\n        float isY = float(i < 2);\r\n        float pos = mix(-0.2, 0.2, float(i)) * isY + mix(-0.5, 0.5, float(i - 2)) * (1.0 - isY);\r\n        float num = pos - (isY * ro.y + (1.0 - isY) * ro.x);\r\n        float den = isY * rd.y + (1.0 - isY) * rd.x;\r\n        float t = num / den;\r\n        vec3 h = ro + rd * t;\r\n\r\n        float depthBoost = smoothstep(0.0, 3.0, h.z);\r\n        h.xy += skew * 0.15 * depthBoost;\r\n\r\n    bool use = t > 0.0 && t < minT;\r\n    gridUV = use ? mix(h.zy, h.xz, isY) / gridScale : gridUV;\r\n    minT = use ? t : minT;\r\n    hitIsY = use ? isY : hitIsY;\r\n    }\r\n\r\n    vec3 hit = ro + rd * minT;\r\n    float dist = length(hit - ro);\r\n\r\n  float jitterAmt = clamp(uLineJitter, 0.0, 1.0);\r\n  if (jitterAmt > 0.0) {\r\n    vec2 j = vec2(\r\n      sin(gridUV.y * 2.7 + iTime * 1.8),\r\n      cos(gridUV.x * 2.3 - iTime * 1.6)\r\n    ) * (0.15 * jitterAmt);\r\n    gridUV += j;\r\n  }\r\n  float fx = fract(gridUV.x);\r\n  float fy = fract(gridUV.y);\r\n  float ax = min(fx, 1.0 - fx);\r\n  float ay = min(fy, 1.0 - fy);\r\n  float wx = fwidth(gridUV.x);\r\n  float wy = fwidth(gridUV.y);\r\n  float halfPx = max(0.0, uLineThickness) * 0.5;\r\n\r\n  float tx = halfPx * wx;\r\n  float ty = halfPx * wy;\r\n\r\n  float aax = wx;\r\n  float aay = wy;\r\n\r\n  float lineX = 1.0 - smoothstep(tx, tx + aax, ax);\r\n  float lineY = 1.0 - smoothstep(ty, ty + aay, ay);\r\n  if (uLineStyle > 0.5) {\r\n    float dashRepeat = 4.0;\r\n    float dashDuty = 0.5;\r\n    float vy = fract(gridUV.y * dashRepeat);\r\n    float vx = fract(gridUV.x * dashRepeat);\r\n    float dashMaskY = step(vy, dashDuty);\r\n    float dashMaskX = step(vx, dashDuty);\r\n    if (uLineStyle < 1.5) {\r\n      lineX *= dashMaskY;\r\n      lineY *= dashMaskX;\r\n    } else {\r\n      float dotRepeat = 6.0;\r\n      float dotWidth = 0.18;\r\n      float cy = abs(fract(gridUV.y * dotRepeat) - 0.5);\r\n      float cx = abs(fract(gridUV.x * dotRepeat) - 0.5);\r\n      float dotMaskY = 1.0 - smoothstep(dotWidth, dotWidth + fwidth(gridUV.y * dotRepeat), cy);\r\n      float dotMaskX = 1.0 - smoothstep(dotWidth, dotWidth + fwidth(gridUV.x * dotRepeat), cx);\r\n      lineX *= dotMaskY;\r\n      lineY *= dotMaskX;\r\n    }\r\n  }\r\n  float primaryMask = max(lineX, lineY);\r\n\r\n  vec2 gridUV2 = (hitIsY > 0.5 ? hit.xz : hit.zy) / gridScale;\r\n  if (jitterAmt > 0.0) {\r\n    vec2 j2 = vec2(\r\n      cos(gridUV2.y * 2.1 - iTime * 1.4),\r\n      sin(gridUV2.x * 2.5 + iTime * 1.7)\r\n    ) * (0.15 * jitterAmt);\r\n    gridUV2 += j2;\r\n  }\r\n  float fx2 = fract(gridUV2.x);\r\n  float fy2 = fract(gridUV2.y);\r\n  float ax2 = min(fx2, 1.0 - fx2);\r\n  float ay2 = min(fy2, 1.0 - fy2);\r\n  float wx2 = fwidth(gridUV2.x);\r\n  float wy2 = fwidth(gridUV2.y);\r\n  float tx2 = halfPx * wx2;\r\n  float ty2 = halfPx * wy2;\r\n  float aax2 = wx2;\r\n  float aay2 = wy2;\r\n  float lineX2 = 1.0 - smoothstep(tx2, tx2 + aax2, ax2);\r\n  float lineY2 = 1.0 - smoothstep(ty2, ty2 + aay2, ay2);\r\n  if (uLineStyle > 0.5) {\r\n    float dashRepeat2 = 4.0;\r\n    float dashDuty2 = 0.5;\r\n    float vy2m = fract(gridUV2.y * dashRepeat2);\r\n    float vx2m = fract(gridUV2.x * dashRepeat2);\r\n    float dashMaskY2 = step(vy2m, dashDuty2);\r\n    float dashMaskX2 = step(vx2m, dashDuty2);\r\n    if (uLineStyle < 1.5) {\r\n      lineX2 *= dashMaskY2;\r\n      lineY2 *= dashMaskX2;\r\n    } else {\r\n      float dotRepeat2 = 6.0;\r\n      float dotWidth2 = 0.18;\r\n      float cy2 = abs(fract(gridUV2.y * dotRepeat2) - 0.5);\r\n      float cx2 = abs(fract(gridUV2.x * dotRepeat2) - 0.5);\r\n      float dotMaskY2 = 1.0 - smoothstep(dotWidth2, dotWidth2 + fwidth(gridUV2.y * dotRepeat2), cy2);\r\n      float dotMaskX2 = 1.0 - smoothstep(dotWidth2, dotWidth2 + fwidth(gridUV2.x * dotRepeat2), cx2);\r\n      lineX2 *= dotMaskY2;\r\n      lineY2 *= dotMaskX2;\r\n    }\r\n  }\r\n    float altMask = max(lineX2, lineY2);\r\n\r\n    float edgeDistX = min(abs(hit.x - (-0.5)), abs(hit.x - 0.5));\r\n    float edgeDistY = min(abs(hit.y - (-0.2)), abs(hit.y - 0.2));\r\n    float edgeDist = mix(edgeDistY, edgeDistX, hitIsY);\r\n    float edgeGate = 1.0 - smoothstep(gridScale * 0.5, gridScale * 2.0, edgeDist);\r\n    altMask *= edgeGate;\r\n\r\n  float lineMask = max(primaryMask, altMask);\r\n\r\n    float fade = exp(-dist * fadeStrength);\r\n\r\n    float dur = max(0.05, uScanDuration);\r\n    float del = max(0.0, uScanDelay);\r\n    float scanZMax = 2.0;\r\n    float widthScale = max(0.1, uScanGlow);\r\n    float sigma = max(0.001, 0.18 * widthScale * uScanSoftness);\r\n    float sigmaA = sigma * 2.0;\r\n\r\n    float combinedPulse = 0.0;\r\n    float combinedAura = 0.0;\r\n\r\n    float cycle = dur + del;\r\n    float tCycle = mod(iTime, cycle);\r\n    float scanPhase = clamp((tCycle - del) / dur, 0.0, 1.0);\r\n    float phase = scanPhase;\r\n    if (uScanDirection > 0.5 && uScanDirection < 1.5) {\r\n      phase = 1.0 - phase;\r\n    } else if (uScanDirection > 1.5) {\r\n      float t2 = mod(max(0.0, iTime - del), 2.0 * dur);\r\n      phase = (t2 < dur) ? (t2 / dur) : (1.0 - (t2 - dur) / dur);\r\n    }\r\n    float scanZ = phase * scanZMax;\r\n    float dz = abs(hit.z - scanZ);\r\n    float lineBand = exp(-0.5 * (dz * dz) / (sigma * sigma));\r\n    float taper = clamp(uPhaseTaper, 0.0, 0.49);\r\n    float headW = taper;\r\n    float tailW = taper;\r\n    float headFade = smoother01(0.0, headW, phase);\r\n    float tailFade = 1.0 - smoother01(1.0 - tailW, 1.0, phase);\r\n    float phaseWindow = headFade * tailFade;\r\n    float pulseBase = lineBand * phaseWindow;\r\n    combinedPulse += pulseBase * clamp(uScanOpacity, 0.0, 1.0);\r\n    float auraBand = exp(-0.5 * (dz * dz) / (sigmaA * sigmaA));\r\n    combinedAura += (auraBand * 0.25) * phaseWindow * clamp(uScanOpacity, 0.0, 1.0);\r\n\r\n    for (int i = 0; i < MAX_SCANS; i++) {\r\n      if (float(i) >= uScanCount) break;\r\n      float tActiveI = iTime - uScanStarts[i];\r\n      float phaseI = clamp(tActiveI / dur, 0.0, 1.0);\r\n      if (uScanDirection > 0.5 && uScanDirection < 1.5) {\r\n        phaseI = 1.0 - phaseI;\r\n      } else if (uScanDirection > 1.5) {\r\n        phaseI = (phaseI < 0.5) ? (phaseI * 2.0) : (1.0 - (phaseI - 0.5) * 2.0);\r\n      }\r\n      float scanZI = phaseI * scanZMax;\r\n      float dzI = abs(hit.z - scanZI);\r\n      float lineBandI = exp(-0.5 * (dzI * dzI) / (sigma * sigma));\r\n      float headFadeI = smoother01(0.0, headW, phaseI);\r\n      float tailFadeI = 1.0 - smoother01(1.0 - tailW, 1.0, phaseI);\r\n      float phaseWindowI = headFadeI * tailFadeI;\r\n      combinedPulse += lineBandI * phaseWindowI * clamp(uScanOpacity, 0.0, 1.0);\r\n      float auraBandI = exp(-0.5 * (dzI * dzI) / (sigmaA * sigmaA));\r\n      combinedAura += (auraBandI * 0.25) * phaseWindowI * clamp(uScanOpacity, 0.0, 1.0);\r\n    }\r\n\r\n  float lineVis = lineMask;\r\n  vec3 gridCol = uLinesColor * lineVis * fade;\r\n  vec3 scanCol = uScanColor * combinedPulse;\r\n  vec3 scanAura = uScanColor * combinedAura;\r\n\r\n    color = gridCol + scanCol + scanAura;\r\n\r\n  float n = fract(sin(dot(gl_FragCoord.xy + vec2(iTime * 123.4), vec2(12.9898,78.233))) * 43758.5453123);\r\n  color += (n - 0.5) * uNoise;\r\n  color = clamp(color, 0.0, 1.0);\r\n  float alpha = clamp(max(lineVis, combinedPulse), 0.0, 1.0);\r\n  float gx = 1.0 - smoothstep(tx * 2.0, tx * 2.0 + aax * 2.0, ax);\r\n  float gy = 1.0 - smoothstep(ty * 2.0, ty * 2.0 + aay * 2.0, ay);\r\n  float halo = max(gx, gy) * fade;\r\n  alpha = max(alpha, halo * clamp(uBloomOpacity, 0.0, 1.0));\r\n  fragColor = vec4(color, alpha);\r\n}\r\n\r\nvoid main(){\r\n  vec4 c;\r\n  mainImage(c, vUv * iResolution.xy);\r\n  gl_FragColor = c;\r\n}\r\n`;\r\n\r\nexport const GridScan: React.FC<GridScanProps> = ({\r\n    enableWebcam = false,\r\n    showPreview = false,\r\n    modelsPath = 'https://cdn.jsdelivr.net/gh/justadudewhohacks/face-api.js@0.22.2/weights',\r\n    sensitivity = 0.55,\r\n    lineThickness = 1,\r\n    linesColor = '#392e4e',\r\n    scanColor = '#FF9FFC',\r\n    scanOpacity = 0.4,\r\n    gridScale = 0.1,\r\n    lineStyle = 'solid',\r\n    lineJitter = 0.1,\r\n    scanDirection = 'pingpong',\r\n    enablePost = true,\r\n    bloomIntensity = 0,\r\n    bloomThreshold = 0,\r\n    bloomSmoothing = 0,\r\n    chromaticAberration = 0.002,\r\n    noiseIntensity = 0.01,\r\n    scanGlow = 0.5,\r\n    scanSoftness = 2,\r\n    scanPhaseTaper = 0.9,\r\n    scanDuration = 2.0,\r\n    scanDelay = 2.0,\r\n    enableGyro = false,\r\n    scanOnClick = false,\r\n    snapBackDelay = 250,\r\n    className,\r\n    style\r\n}) => {\r\n    const containerRef = useRef<HTMLDivElement | null>(null);\r\n    const videoRef = useRef<HTMLVideoElement | null>(null);\r\n\r\n    const rendererRef = useRef<THREE.WebGLRenderer | null>(null);\r\n    const materialRef = useRef<THREE.ShaderMaterial | null>(null);\r\n    const composerRef = useRef<EffectComposer | null>(null);\r\n    const bloomRef = useRef<BloomEffect | null>(null);\r\n    const chromaRef = useRef<ChromaticAberrationEffect | null>(null);\r\n    const rafRef = useRef<number | null>(null);\r\n\r\n    const [modelsReady, setModelsReady] = useState(false);\r\n    const [uiFaceActive, setUiFaceActive] = useState(false);\r\n\r\n    const lookTarget = useRef(new THREE.Vector2(0, 0));\r\n    const tiltTarget = useRef(0);\r\n    const yawTarget = useRef(0);\r\n\r\n    const lookCurrent = useRef(new THREE.Vector2(0, 0));\r\n    const lookVel = useRef(new THREE.Vector2(0, 0));\r\n    const tiltCurrent = useRef(0);\r\n    const tiltVel = useRef(0);\r\n    const yawCurrent = useRef(0);\r\n    const yawVel = useRef(0);\r\n\r\n    const MAX_SCANS = 8;\r\n    const scanStartsRef = useRef<number[]>([]);\r\n\r\n    const pushScan = (t: number) => {\r\n        const arr = scanStartsRef.current.slice();\r\n        if (arr.length >= MAX_SCANS) arr.shift();\r\n        arr.push(t);\r\n        scanStartsRef.current = arr;\r\n        if (materialRef.current) {\r\n            const u = materialRef.current.uniforms;\r\n            const buf = new Array(MAX_SCANS).fill(0);\r\n            for (let i = 0; i < arr.length && i < MAX_SCANS; i++) buf[i] = arr[i];\r\n            u.uScanStarts.value = buf;\r\n            u.uScanCount.value = arr.length;\r\n        }\r\n    };\r\n\r\n    const bufX = useRef<number[]>([]);\r\n    const bufY = useRef<number[]>([]);\r\n    const bufT = useRef<number[]>([]);\r\n    const bufYaw = useRef<number[]>([]);\r\n\r\n    const s = THREE.MathUtils.clamp(sensitivity, 0, 1);\r\n    const skewScale = THREE.MathUtils.lerp(0.06, 0.2, s);\r\n    const tiltScale = THREE.MathUtils.lerp(0.12, 0.3, s);\r\n    const yawScale = THREE.MathUtils.lerp(0.1, 0.28, s);\r\n    const depthResponse = THREE.MathUtils.lerp(0.25, 0.45, s);\r\n    const smoothTime = THREE.MathUtils.lerp(0.45, 0.12, s);\r\n    const maxSpeed = Infinity;\r\n\r\n    const yBoost = THREE.MathUtils.lerp(1.2, 1.6, s);\r\n\r\n    useEffect(() => {\r\n        const el = containerRef.current;\r\n        if (!el) return;\r\n        let leaveTimer: number | null = null;\r\n        const onMove = (e: MouseEvent) => {\r\n            if (uiFaceActive) return;\r\n            if (leaveTimer) {\r\n                clearTimeout(leaveTimer);\r\n                leaveTimer = null;\r\n            }\r\n            const rect = el.getBoundingClientRect();\r\n            const nx = ((e.clientX - rect.left) / rect.width) * 2 - 1;\r\n            const ny = -(((e.clientY - rect.top) / rect.height) * 2 - 1);\r\n            lookTarget.current.set(nx, ny);\r\n        };\r\n        const onClick = async () => {\r\n            const nowSec = performance.now() / 1000;\r\n            if (scanOnClick) pushScan(nowSec);\r\n            if (\r\n                enableGyro &&\r\n                typeof window !== 'undefined' &&\r\n                (window as any).DeviceOrientationEvent &&\r\n                (DeviceOrientationEvent as any).requestPermission\r\n            ) {\r\n                try {\r\n                    await (DeviceOrientationEvent as any).requestPermission();\r\n                } catch { }\r\n            }\r\n        };\r\n        const onEnter = () => {\r\n            if (leaveTimer) {\r\n                clearTimeout(leaveTimer);\r\n                leaveTimer = null;\r\n            }\r\n        };\r\n        const onLeave = () => {\r\n            if (uiFaceActive) return;\r\n            if (leaveTimer) clearTimeout(leaveTimer);\r\n            leaveTimer = window.setTimeout(\r\n                () => {\r\n                    lookTarget.current.set(0, 0);\r\n                    tiltTarget.current = 0;\r\n                    yawTarget.current = 0;\r\n                },\r\n                Math.max(0, snapBackDelay || 0)\r\n            );\r\n        };\r\n        el.addEventListener('mousemove', onMove);\r\n        el.addEventListener('mouseenter', onEnter);\r\n        if (scanOnClick) el.addEventListener('click', onClick);\r\n        el.addEventListener('mouseleave', onLeave);\r\n        return () => {\r\n            el.removeEventListener('mousemove', onMove);\r\n            el.removeEventListener('mouseenter', onEnter);\r\n            el.removeEventListener('mouseleave', onLeave);\r\n            if (scanOnClick) el.removeEventListener('click', onClick);\r\n            if (leaveTimer) clearTimeout(leaveTimer);\r\n        };\r\n    }, [uiFaceActive, snapBackDelay, scanOnClick, enableGyro]);\r\n\r\n    useEffect(() => {\r\n        const container = containerRef.current;\r\n        if (!container) return;\r\n\r\n        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\r\n        rendererRef.current = renderer;\r\n        renderer.setPixelRatio(Math.min(window.devicePixelRatio || 1, 1)); // Cap at 1 for performance\r\n        renderer.setSize(container.clientWidth, container.clientHeight);\r\n        renderer.outputColorSpace = THREE.SRGBColorSpace;\r\n        renderer.toneMapping = THREE.NoToneMapping;\r\n        renderer.autoClear = false;\r\n        renderer.setClearColor(0x000000, 0);\r\n        container.appendChild(renderer.domElement);\r\n\r\n        const uniforms = {\r\n            iResolution: {\r\n                value: new THREE.Vector3(container.clientWidth, container.clientHeight, renderer.getPixelRatio())\r\n            },\r\n            iTime: { value: 0 },\r\n            uSkew: { value: new THREE.Vector2(0, 0) },\r\n            uTilt: { value: 0 },\r\n            uYaw: { value: 0 },\r\n            uLineThickness: { value: lineThickness },\r\n            uLinesColor: { value: srgbColor(linesColor) },\r\n            uScanColor: { value: srgbColor(scanColor) },\r\n            uGridScale: { value: gridScale },\r\n            uLineStyle: { value: lineStyle === 'dashed' ? 1 : lineStyle === 'dotted' ? 2 : 0 },\r\n            uLineJitter: { value: Math.max(0, Math.min(1, lineJitter || 0)) },\r\n            uScanOpacity: { value: scanOpacity },\r\n            uNoise: { value: noiseIntensity },\r\n            uBloomOpacity: { value: bloomIntensity },\r\n            uScanGlow: { value: scanGlow },\r\n            uScanSoftness: { value: scanSoftness },\r\n            uPhaseTaper: { value: scanPhaseTaper },\r\n            uScanDuration: { value: scanDuration },\r\n            uScanDelay: { value: scanDelay },\r\n            uScanDirection: { value: scanDirection === 'backward' ? 1 : scanDirection === 'pingpong' ? 2 : 0 },\r\n            uScanStarts: { value: new Array(MAX_SCANS).fill(0) },\r\n            uScanCount: { value: 0 }\r\n        };\r\n\r\n        const material = new THREE.ShaderMaterial({\r\n            uniforms,\r\n            vertexShader: vert,\r\n            fragmentShader: frag,\r\n            transparent: true,\r\n            depthWrite: false,\r\n            depthTest: false\r\n        });\r\n        materialRef.current = material;\r\n\r\n        const scene = new THREE.Scene();\r\n        const camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);\r\n        const quad = new THREE.Mesh(new THREE.PlaneGeometry(2, 2), material);\r\n        scene.add(quad);\r\n\r\n        let composer: EffectComposer | null = null;\r\n        if (enablePost) {\r\n            composer = new EffectComposer(renderer);\r\n            composerRef.current = composer;\r\n            const renderPass = new RenderPass(scene, camera);\r\n            composer.addPass(renderPass);\r\n\r\n            const bloom = new BloomEffect({\r\n                intensity: 1.0,\r\n                luminanceThreshold: bloomThreshold,\r\n                luminanceSmoothing: bloomSmoothing\r\n            });\r\n            bloom.blendMode.opacity.value = Math.max(0, bloomIntensity);\r\n            bloomRef.current = bloom;\r\n\r\n            const chroma = new ChromaticAberrationEffect({\r\n                offset: new THREE.Vector2(chromaticAberration, chromaticAberration),\r\n                radialModulation: true,\r\n                modulationOffset: 0.0\r\n            });\r\n            chromaRef.current = chroma;\r\n\r\n            const effectPass = new EffectPass(camera, bloom, chroma);\r\n            effectPass.renderToScreen = true;\r\n            composer.addPass(effectPass);\r\n        }\r\n\r\n        const onResize = () => {\r\n            renderer.setSize(container.clientWidth, container.clientHeight);\r\n            material.uniforms.iResolution.value.set(container.clientWidth, container.clientHeight, renderer.getPixelRatio());\r\n            if (composerRef.current) composerRef.current.setSize(container.clientWidth, container.clientHeight);\r\n        };\r\n        window.addEventListener('resize', onResize);\r\n\r\n        let last = performance.now();\r\n        const tick = () => {\r\n            const now = performance.now();\r\n            const dt = Math.max(0, Math.min(0.1, (now - last) / 1000));\r\n            last = now;\r\n\r\n            lookCurrent.current.copy(\r\n                smoothDampVec2(lookCurrent.current, lookTarget.current, lookVel.current, smoothTime, maxSpeed, dt)\r\n            );\r\n\r\n            const tiltSm = smoothDampFloat(\r\n                tiltCurrent.current,\r\n                tiltTarget.current,\r\n                { v: tiltVel.current },\r\n                smoothTime,\r\n                maxSpeed,\r\n                dt\r\n            );\r\n            tiltCurrent.current = tiltSm.value;\r\n            tiltVel.current = tiltSm.v;\r\n\r\n            const yawSm = smoothDampFloat(\r\n                yawCurrent.current,\r\n                yawTarget.current,\r\n                { v: yawVel.current },\r\n                smoothTime,\r\n                maxSpeed,\r\n                dt\r\n            );\r\n            yawCurrent.current = yawSm.value;\r\n            yawVel.current = yawSm.v;\r\n\r\n            const skew = new THREE.Vector2(lookCurrent.current.x * skewScale, -lookCurrent.current.y * yBoost * skewScale);\r\n            material.uniforms.uSkew.value.set(skew.x, skew.y);\r\n            material.uniforms.uTilt.value = tiltCurrent.current * tiltScale;\r\n            material.uniforms.uYaw.value = THREE.MathUtils.clamp(yawCurrent.current * yawScale, -0.6, 0.6);\r\n\r\n            material.uniforms.iTime.value = now / 1000;\r\n            renderer.clear(true, true, true);\r\n            if (composerRef.current) {\r\n                composerRef.current.render(dt);\r\n            } else {\r\n                renderer.render(scene, camera);\r\n            }\r\n            rafRef.current = requestAnimationFrame(tick);\r\n        };\r\n        rafRef.current = requestAnimationFrame(tick);\r\n\r\n        return () => {\r\n            if (rafRef.current) cancelAnimationFrame(rafRef.current);\r\n            window.removeEventListener('resize', onResize);\r\n            material.dispose();\r\n            (quad.geometry as THREE.BufferGeometry).dispose();\r\n            if (composerRef.current) {\r\n                composerRef.current.dispose();\r\n                composerRef.current = null;\r\n            }\r\n            renderer.dispose();\r\n            container.removeChild(renderer.domElement);\r\n        };\r\n    }, [\r\n        sensitivity,\r\n        lineThickness,\r\n        linesColor,\r\n        scanColor,\r\n        scanOpacity,\r\n        gridScale,\r\n        lineStyle,\r\n        lineJitter,\r\n        scanDirection,\r\n        enablePost\r\n    ]);\r\n\r\n    useEffect(() => {\r\n        const m = materialRef.current;\r\n        if (m) {\r\n            const u = m.uniforms;\r\n            u.uLineThickness.value = lineThickness;\r\n            (u.uLinesColor.value as THREE.Color).copy(srgbColor(linesColor));\r\n            (u.uScanColor.value as THREE.Color).copy(srgbColor(scanColor));\r\n            u.uGridScale.value = gridScale;\r\n            u.uLineStyle.value = lineStyle === 'dashed' ? 1 : lineStyle === 'dotted' ? 2 : 0;\r\n            u.uLineJitter.value = Math.max(0, Math.min(1, lineJitter || 0));\r\n            u.uBloomOpacity.value = Math.max(0, bloomIntensity);\r\n            u.uNoise.value = Math.max(0, noiseIntensity);\r\n            u.uScanGlow.value = scanGlow;\r\n            u.uScanOpacity.value = Math.max(0, Math.min(1, scanOpacity));\r\n            u.uScanDirection.value = scanDirection === 'backward' ? 1 : scanDirection === 'pingpong' ? 2 : 0;\r\n            u.uScanSoftness.value = scanSoftness;\r\n            u.uPhaseTaper.value = scanPhaseTaper;\r\n            u.uScanDuration.value = Math.max(0.05, scanDuration);\r\n            u.uScanDelay.value = Math.max(0.0, scanDelay);\r\n        }\r\n        if (bloomRef.current) {\r\n            bloomRef.current.blendMode.opacity.value = Math.max(0, bloomIntensity);\r\n            (bloomRef.current as any).luminanceMaterial.threshold = bloomThreshold;\r\n            (bloomRef.current as any).luminanceMaterial.smoothing = bloomSmoothing;\r\n        }\r\n        if (chromaRef.current) {\r\n            chromaRef.current.offset.set(chromaticAberration, chromaticAberration);\r\n        }\r\n    }, [\r\n        lineThickness,\r\n        linesColor,\r\n        scanColor,\r\n        gridScale,\r\n        lineStyle,\r\n        lineJitter,\r\n        bloomIntensity,\r\n        bloomThreshold,\r\n        bloomSmoothing,\r\n        chromaticAberration,\r\n        noiseIntensity,\r\n        scanGlow,\r\n        scanOpacity,\r\n        scanDirection,\r\n        scanSoftness,\r\n        scanPhaseTaper,\r\n        scanDuration,\r\n        scanDelay\r\n    ]);\r\n\r\n    useEffect(() => {\r\n        if (!enableGyro) return;\r\n        const handler = (e: DeviceOrientationEvent) => {\r\n            if (uiFaceActive) return;\r\n            const gamma = e.gamma ?? 0;\r\n            const beta = e.beta ?? 0;\r\n            const nx = THREE.MathUtils.clamp(gamma / 45, -1, 1);\r\n            const ny = THREE.MathUtils.clamp(-beta / 30, -1, 1);\r\n            lookTarget.current.set(nx, ny);\r\n            tiltTarget.current = THREE.MathUtils.degToRad(gamma) * 0.4;\r\n        };\r\n        window.addEventListener('deviceorientation', handler);\r\n        return () => {\r\n            window.removeEventListener('deviceorientation', handler);\r\n        };\r\n    }, [enableGyro, uiFaceActive]);\r\n\r\n    useEffect(() => {\r\n        let canceled = false;\r\n        const load = async () => {\r\n            try {\r\n                await Promise.all([\r\n                    faceapi.nets.tinyFaceDetector.loadFromUri(modelsPath),\r\n                    faceapi.nets.faceLandmark68TinyNet.loadFromUri(modelsPath)\r\n                ]);\r\n                if (!canceled) setModelsReady(true);\r\n            } catch {\r\n                if (!canceled) setModelsReady(false);\r\n            }\r\n        };\r\n        load();\r\n        return () => {\r\n            canceled = true;\r\n        };\r\n    }, [modelsPath]);\r\n\r\n    useEffect(() => {\r\n        let stop = false;\r\n        let lastDetect = 0;\r\n\r\n        const start = async () => {\r\n            if (!enableWebcam || !modelsReady) return;\r\n            const video = videoRef.current;\r\n            if (!video) return;\r\n\r\n            try {\r\n                const stream = await navigator.mediaDevices.getUserMedia({\r\n                    video: { facingMode: 'user', width: { ideal: 1280 }, height: { ideal: 720 } },\r\n                    audio: false\r\n                });\r\n                video.srcObject = stream;\r\n                await video.play();\r\n            } catch {\r\n                return;\r\n            }\r\n\r\n            const opts = new faceapi.TinyFaceDetectorOptions({ inputSize: 320, scoreThreshold: 0.5 });\r\n\r\n            const detect = async (ts: number) => {\r\n                if (stop) return;\r\n\r\n                if (ts - lastDetect >= 33) {\r\n                    lastDetect = ts;\r\n                    try {\r\n                        const res = await faceapi.detectSingleFace(video, opts).withFaceLandmarks(true);\r\n                        if (res && res.detection) {\r\n                            const det = res.detection;\r\n                            const box = det.box;\r\n                            const vw = video.videoWidth || 1;\r\n                            const vh = video.videoHeight || 1;\r\n\r\n                            const cx = box.x + box.width * 0.5;\r\n                            const cy = box.y + box.height * 0.5;\r\n                            const nx = (cx / vw) * 2 - 1;\r\n                            const ny = (cy / vh) * 2 - 1;\r\n                            medianPush(bufX.current, nx, 5);\r\n                            medianPush(bufY.current, ny, 5);\r\n                            const nxm = median(bufX.current);\r\n                            const nym = median(bufY.current);\r\n\r\n                            const look = new THREE.Vector2(Math.tanh(nxm), Math.tanh(nym));\r\n\r\n                            const faceSize = Math.min(1, Math.hypot(box.width / vw, box.height / vh));\r\n                            const depthScale = 1 + depthResponse * (faceSize - 0.25);\r\n                            lookTarget.current.copy(look.multiplyScalar(depthScale));\r\n\r\n                            const leftEye = res.landmarks.getLeftEye();\r\n                            const rightEye = res.landmarks.getRightEye();\r\n                            const lc = centroid(leftEye);\r\n                            const rc = centroid(rightEye);\r\n                            const tilt = Math.atan2(rc.y - lc.y, rc.x - lc.x);\r\n                            medianPush(bufT.current, tilt, 5);\r\n                            tiltTarget.current = median(bufT.current);\r\n\r\n                            const nose = res.landmarks.getNose();\r\n                            const tip = nose[nose.length - 1] || nose[Math.floor(nose.length / 2)];\r\n                            const jaw = res.landmarks.getJawOutline();\r\n                            const leftCheek = jaw[3] || jaw[2];\r\n                            const rightCheek = jaw[13] || jaw[14];\r\n                            const dL = dist2(tip, leftCheek);\r\n                            const dR = dist2(tip, rightCheek);\r\n                            const eyeDist = Math.hypot(rc.x - lc.x, rc.y - lc.y) + 1e-6;\r\n                            let yawSignal = THREE.MathUtils.clamp((dR - dL) / (eyeDist * 1.6), -1, 1);\r\n                            yawSignal = Math.tanh(yawSignal);\r\n                            medianPush(bufYaw.current, yawSignal, 5);\r\n                            yawTarget.current = median(bufYaw.current);\r\n\r\n                            setUiFaceActive(true);\r\n                        } else {\r\n                            setUiFaceActive(false);\r\n                        }\r\n                    } catch {\r\n                        setUiFaceActive(false);\r\n                    }\r\n                }\r\n\r\n                if ('requestVideoFrameCallback' in HTMLVideoElement.prototype) {\r\n                    (video as any).requestVideoFrameCallback(() => detect(performance.now()));\r\n                } else {\r\n                    requestAnimationFrame(detect);\r\n                }\r\n            };\r\n\r\n            requestAnimationFrame(detect);\r\n        };\r\n\r\n        start();\r\n\r\n        return () => {\r\n            stop = true;\r\n            const video = videoRef.current;\r\n            if (video) {\r\n                const stream = video.srcObject as MediaStream | null;\r\n                if (stream) stream.getTracks().forEach(t => t.stop());\r\n                video.pause();\r\n                video.srcObject = null;\r\n            }\r\n        };\r\n    }, [enableWebcam, modelsReady, depthResponse]);\r\n\r\n    return (\r\n        <div ref={containerRef} className={`relative w-full h-full overflow-hidden ${className ?? ''}`} style={style}>\r\n            {showPreview && (\r\n                <div className=\"absolute right-3 bottom-3 w-[220px] h-[132px] rounded-lg overflow-hidden border border-white/25 shadow-[0_4px_16px_rgba(0,0,0,0.4)] bg-black text-white text-[12px] leading-[1.2] font-sans pointer-events-none\">\r\n                    <video ref={videoRef} muted playsInline autoPlay className=\"w-full h-full object-cover -scale-x-100\" />\r\n                    <div className=\"absolute left-2 top-2 px-[6px] py-[2px] bg-black/50 rounded-[6px] backdrop-blur-[4px]\">\r\n                        {enableWebcam\r\n                            ? modelsReady\r\n                                ? uiFaceActive\r\n                                    ? 'Face: tracking'\r\n                                    : 'Face: searching'\r\n                                : 'Loading models'\r\n                            : 'Webcam disabled'}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nfunction srgbColor(hex: string) {\r\n    const c = new THREE.Color(hex);\r\n    return c.convertSRGBToLinear();\r\n}\r\n\r\nfunction smoothDampVec2(\r\n    current: THREE.Vector2,\r\n    target: THREE.Vector2,\r\n    currentVelocity: THREE.Vector2,\r\n    smoothTime: number,\r\n    maxSpeed: number,\r\n    deltaTime: number\r\n): THREE.Vector2 {\r\n    const out = current.clone();\r\n    smoothTime = Math.max(0.0001, smoothTime);\r\n    const omega = 2 / smoothTime;\r\n    const x = omega * deltaTime;\r\n    const exp = 1 / (1 + x + 0.48 * x * x + 0.235 * x * x * x);\r\n\r\n    let change = current.clone().sub(target);\r\n    const originalTo = target.clone();\r\n\r\n    const maxChange = maxSpeed * smoothTime;\r\n    if (change.length() > maxChange) change.setLength(maxChange);\r\n\r\n    target = current.clone().sub(change);\r\n    const temp = currentVelocity.clone().addScaledVector(change, omega).multiplyScalar(deltaTime);\r\n    currentVelocity.sub(temp.clone().multiplyScalar(omega));\r\n    currentVelocity.multiplyScalar(exp);\r\n\r\n    out.copy(target.clone().add(change.add(temp).multiplyScalar(exp)));\r\n\r\n    const origMinusCurrent = originalTo.clone().sub(current);\r\n    const outMinusOrig = out.clone().sub(originalTo);\r\n    if (origMinusCurrent.dot(outMinusOrig) > 0) {\r\n        out.copy(originalTo);\r\n        currentVelocity.set(0, 0);\r\n    }\r\n    return out;\r\n}\r\n\r\nfunction smoothDampFloat(\r\n    current: number,\r\n    target: number,\r\n    velRef: { v: number },\r\n    smoothTime: number,\r\n    maxSpeed: number,\r\n    deltaTime: number\r\n): { value: number; v: number } {\r\n    smoothTime = Math.max(0.0001, smoothTime);\r\n    const omega = 2 / smoothTime;\r\n    const x = omega * deltaTime;\r\n    const exp = 1 / (1 + x + 0.48 * x * x + 0.235 * x * x * x);\r\n\r\n    let change = current - target;\r\n    const originalTo = target;\r\n\r\n    const maxChange = maxSpeed * smoothTime;\r\n    change = Math.sign(change) * Math.min(Math.abs(change), maxChange);\r\n\r\n    target = current - change;\r\n    const temp = (velRef.v + omega * change) * deltaTime;\r\n    velRef.v = (velRef.v - omega * temp) * exp;\r\n\r\n    let out = target + (change + temp) * exp;\r\n\r\n    const origMinusCurrent = originalTo - current;\r\n    const outMinusOrig = out - originalTo;\r\n    if (origMinusCurrent * outMinusOrig > 0) {\r\n        out = originalTo;\r\n        velRef.v = 0;\r\n    }\r\n    return { value: out, v: velRef.v };\r\n}\r\n\r\nfunction medianPush(buf: number[], v: number, maxLen: number) {\r\n    buf.push(v);\r\n    if (buf.length > maxLen) buf.shift();\r\n}\r\n\r\nfunction median(buf: number[]) {\r\n    if (buf.length === 0) return 0;\r\n    const a = [...buf].sort((x, y) => x - y);\r\n    const mid = Math.floor(a.length / 2);\r\n    return a.length % 2 ? a[mid] : (a[mid - 1] + a[mid]) * 0.5;\r\n}\r\n\r\nfunction centroid(points: { x: number; y: number }[]) {\r\n    let x = 0,\r\n        y = 0;\r\n    const n = points.length || 1;\r\n    for (const p of points) {\r\n        x += p.x;\r\n        y += p.y;\r\n    }\r\n    return { x: x / n, y: y / n };\r\n}\r\n\r\nfunction dist2(a: { x: number; y: number }, b: { x: number; y: number }) {\r\n    return Math.hypot(a.x - b.x, a.y - b.y);\r\n}\r\n"],"names":[],"mappings":"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"}}]
}
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,r)=>{t.exports=e.r(76562)},32341,e=>{"use strict";var t=e.i(43476),r=e.i(71645),o=e.i(18566);let a=(0,r.createContext)(void 0);function s({children:e}){let[s,i]=(0,r.useState)(null),[u,l]=(0,r.useState)(!0),c=(0,o.useRouter)();(0,r.useEffect)(()=>{let e=localStorage.getItem("user");if(e)try{i(JSON.parse(e))}catch(e){console.error("Auth context error",e),localStorage.removeItem("user")}l(!1)},[]);let n=async()=>{try{await fetch("/api/auth/logout",{method:"POST"})}catch(e){console.error("Logout API error:",e)}i(null),localStorage.removeItem("user"),Object.keys(localStorage).forEach(e=>{(e.startsWith("cached_trips_")||e.startsWith("onboarding_seen_"))&&localStorage.removeItem(e)}),window.location.href="/"};return(0,t.jsx)(a.Provider,{value:{user:s,isLoading:u,isAuthenticated:!!s,login:e=>{r.default.startTransition(()=>{i(e)}),localStorage.setItem("user",JSON.stringify(e)),c.push("/dashboard")},register:e=>{i(e),localStorage.setItem("user",JSON.stringify(e)),c.replace("/dashboard")},logout:n},children:e})}function i(){let e=(0,r.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}e.s(["AuthProvider",()=>s,"useAuth",()=>i])}]);